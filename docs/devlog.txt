We're working on a GameBoy game with GBDK2020, specifically a music sequencer
We've just implemented SRAM saving functionality
We're currently fixing UI rendering issues specifically in the SAVE COPY LOAD CLEAR menu, particularly when:

LOADing a pattern
PASTEing a pattern
Exiting the menu


The specific issues we're trying to fix:

Menu becomes invisible during LOAD/PASTE confirmation
We want to add a short delay when loading/pasting
We're also fixing compiler errors related to pending_operation becoming a part of the BANK_DATA structure instead of being a static variable


The immediate errors we're getting are multiple "undefined identifier 'pending_operation'" because we need to update all references to use sequencer.bank_data.pending_operation instead.

Would you like me to list out the specific files we've been working with as well?

Here are the key files we've been working with:

Main files needing changes:

Copy
C:\gbdev\interval-odyssey-gb\src\sequencer.c
C:\gbdev\interval-odyssey-gb\src\sequencer.h
Related files for context:

Copy
C:\gbdev\interval-odyssey-gb\src\settings.c
C:\gbdev\interval-odyssey-gb\src\settings.h
The major changes we just made but need to fix:

In sequencer.h:

Added operation_delay and pending_operation to BANK_DATA structure
In sequencer.c:

Initialized new variables in init_sequencer()
Added delay handling in update_sequencer()
Need to fix all instances of bare pending_operation to use sequencer.bank_data.pending_operation
The current errors are around undefined pending_operation identifiers since we moved it into the BANK_DATA structure but haven't updated all references yet.

There's also a warning about overflow in implicit constant conversion at src/sequencer.c:335 that we haven't addressed yet.

Should I include the current file contents to help the new chat get started?

 