# Development Notes - February 3, 2025 (Part 5)

## Pattern Bank Implementation - Phase 1

### Current Task: Bank Switching Implementation
1. Update initialization for dual bank support
   - Initialize bank_data in sequencer
   - Set default to Bank A
   - Create memory space for two pattern sets

2. Modify pattern display
   - Change "PATTERN:1" to "PATTERN:A"
   - Add bank switch handling in input code
   - Add playback completion check

3. Pattern switch timing logic
   - Check if pattern is playing
   - Wait for 16-step completion
   - Preserve pattern during switch
   - Resume playback if was playing

### Implementation Order:
1. Initialize bank system with safe defaults
2. Implement pattern preservation
3. Add bank switch timing logic
4. Update UI elements
5. Test switching behavior

### Code Changes Needed:
1. sequencer.c:init_sequencer()
   - Add bank initialization
   - Allocate pattern storage

2. sequencer.c:handle_main_menu_input()
   - Add bank switching logic
   - Add playback check

3. sequencer.c:update_sequencer()
   - Add switch pending logic
   - Handle bank transition

4. sequencer.c:draw_main_menu()
   - Update pattern display
   - Show current bank