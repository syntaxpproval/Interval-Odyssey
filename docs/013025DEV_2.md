# Development Notes - January 30, 2025 (2)

## Attack/Decay Implementation Progress

### Completed Changes
1. Envelope Control Implementation
   - Refined envelope parameters (Attack/Decay 0-6)
   - Improved note triggering logic in sequencer
   - Fixed clicking issues during sequence playback
   - Implemented proper envelope behavior during inactive steps

2. Technical Implementation Details
   - Attack parameter controls fade-in speed (0 = instant, 1-6 = increasingly slower)
   - Decay parameter controls fade-out behavior (0 = sustain, 1-6 = increasingly faster)
   - Notes now continue properly through inactive steps
   - Only retrigger envelope on armed step transitions

### Next Steps
1. Parameter Refinements
   - Set Attack:0 and Decay:1 as default values
   - Disable Decay:0 from selection
   - Add bounds checking for parameter ranges

2. Additional Features
   - Implement Volume parameter
   - Add support for Channel 3 (Wave) and Channel 4 (Noise)
   - UI improvements and menu navigation enhancements
   - Add copy/paste functionality for steps/patterns

3. Long-term Features
   - Chord Mode implementation
   - Pattern Mode development
   - Additional sequencer tools and utilities

### Technical Notes
- Envelope Register (NRx2) configuration:
  - Bits 7-4: Initial Volume (0-15)
  - Bit 3: Envelope Direction (0=Decrease, 1=Increase)
  - Bits 2-0: Step Length (0-7)

- Length Counter behavior:
  - Used in conjunction with envelope for proper note duration
  - Prevents unwanted sustain in sequence mode
  - Allows natural decay during inactive steps

### Known Issues/Limitations
- Envelope behavior could be further refined
- Parameter ranges need adjustment for better usability
- Channel 3 and 4 implementation pending
- UI needs streamlining for better user experience

### Next Development Focus
Priority order for next implementation phase:
1. Parameter range adjustments and defaults
2. Volume control implementation
3. Channel 3 & 4 support
4. UI/UX improvements